<!doctype html>
<html>
<head>
	<!-- basic -->
	<meta charset="utf-8">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

	<!-- title -->
	<title>check_valid_codes2() || Datavyu: Video coding and data visualization tool</title>

	<!--GTM tracking for databrary-->
	
	<!--GTM tracking for datavyu-->
	
		<!-- Google Tag Manager -->
		<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
		new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
		j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
		'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
		})(window,document,'script','dataLayer','GTM-NFNQ3MV');</script>
		<!-- End Google Tag Manager -->

	<!-- optimize -->
	<meta http-equiv="imagetoolbar" content="false">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

	<!-- network -->
	<link rel="sitemap" type="application/xml" title="sitemap" href="/sitemap.xml">

	<!-- feeds -->    

	<!-- icons -->
	<link rel="shortcut icon" href="/ico/favicon.png">
	<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/ico/apple-touch-icon-114x114.png">
	<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/ico/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon-precomposed" href="/ico/apple-touch-icon.png">

	<!-- css -->
	<link rel="stylesheet" href="/theme/css/normalize.css">
	<link rel="stylesheet" href="/theme/css/common.css">

	<!-- js -->
	<script src="/theme/js/jquery-1.11.1.min.js"></script>
	<script src="/theme/js/common.js"></script>
</head>

<body>
		<!-- Google Tag Manager (noscript) -->	
		<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NFNQ3MV"
		height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
		<!-- End Google Tag Manager (noscript) -->
<header id="site_header" class="site_header">
	<div class="wrap">
		<h1>
			<a href="/" title="Datavyu: Video coding and data visualization tool"><img id="logo" src="/theme/img/logo/datavyu.png" alt="Datavyu: Video coding and data visualization tool"></a>
		</h1>

		<nav>
			<ul>
				<li class="">
					<a href="/features.html" title="Discover Datavyu">Features</a>
				</li>
				<li class="">
					<a href="/download.html" title="Download Datavyu">Download</a>
				</li>
				<li class="current">
					<a href="/user-guide/index.html" title="User Guide">User Guide</a>
				</li>
				<li class="">
					<a href="https://github.com/databrary/Datavyu-Example-Scripts" title="Example Scripts">Scripts</a>
				</li>
				<li class="">
					<a href="https://forms.gle/ZqdwbBLJ3GRgiX8g6" title="Support">Support</a>
				</li>
				<li class="">
					<a href="/contact.html" title="Contact Us">Contact</a>
				</li>
			</ul>
		</nav>
	</div>
</header>
	<main id="site_main" class="site_main">
		<div class="wrap">
<article id="page_user-guide_api_reference_1.3.6_check_valid_codes2" class="hentry page page_user-guide_api_reference_1.3.6_check_valid_codes2 page_sphinx">
<nav class="breadcrumbs cf">
	<ul class="cf">
								<li>
									<a href="/user-guide/index.html" class="">User Guide</a>
								</li>
								<li>
									<a href="/user-guide/api.html" class="">Ruby API</a>
								</li>
								<li>
									<a href="/user-guide/api/reference.html" class="">Datavyu Ruby API Reference</a>
								</li>
								<li>
									<a href="/user-guide/api/reference/1.3.6.html" class="">Version 1.3.6</a>
								</li>
	</ul>
</nav>
    <h1 class="entry-title"><span></span>check_valid_codes2()</h1>

    <div class="cf">
        <div class="entry-content col_with_nav">
			<!--  -->

			<!-- Handle change of directory structure in 2020-07 -->

				
        
  <div class="section" id="check-valid-codes2">
<h1>check_valid_codes2()<a class="headerlink" href="#check-valid-codes2" title="Permalink to this headline">¶</a></h1>
<dl class="py function">
<dt id="check_valid_codes2">
<code class="sig-name descname">check_valid_codes2</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">data</span></em>, <em class="sig-param"><span class="n">dump_file</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">arg_code_pairs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#check_valid_codes2" title="Permalink to this definition">¶</a></dt>
<dd><p>Advanced version of <cite>check_valid_codes()</cite>, available in Datavyu version 1.3.5 and higher.</p>
<p>Can check codes using patterns and can operate over multiple columns.
Backwards-compatible with <cite>check_valid_codes()</cite> so this function should be able to replace calls to <cite>check_valid_codes()</cite>.</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 18%" />
<col style="width: 36%" />
<col style="width: 45%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Argument</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">data</span></code></p></td>
<td><p>String, RVariable, or Hash</p></td>
<td><p>When this parameter is a String or a column object from <cite>getVariable()</cite>, the function operates on codes within this column.
If the parameter is a Hash (associative array), the function ignores the arg_code_pairs arguments and uses data from this Hash.
The Hash must be structured as a nested mapping from columns (either as Strings or RVariables) to Hashes. These nested hashes
must be mappings from code names (as Strings) to valid code values (as either lists (Arrays) or patterns (Regexp)).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">dump_file</span></code></p></td>
<td><p>String, or Ruby File object</p></td>
<td><p>Path of the file to dump output to. Use empty String (i.e. “”) to write to the
console. You can also specify a Ruby File object (e.g. from <cite>File.open()</cite>).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">*arg_code_pairs</span></code></p></td>
<td><p>Key-value pairs</p></td>
<td><p>List of code names and valid values, in the format
“code_name”, [“valid1”, “valid2”],
“code_name2”, [“valid3”, “valid4”], etc.
This is ignored if first argument is a Hash.</p></td>
</tr>
</tbody>
</table>
<div class="admonition-returns admonition">
<p class="admonition-title">Returns</p>
<p>Nothing. Generated messages are output to console and/or file.</p>
</div>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p>The following example checks three columns for valid code values.
Before the call to the function, a nested mapping is created for each column.
The inner map is a mapping from the names of codes to their valid values.</p>
<div class="highlight-ruby notranslate"><div class="highlight"><pre><span></span><span class="c1">## Params</span>
<span class="n">date_format</span> <span class="o">=</span> <span class="sr">/\A\d{2}\/\d{2}\/\d{4}\Z/</span> <span class="c1"># dates must be formatted: ##/##/####</span>
<span class="c1"># Associative mapping from column names to mappings from code names to valid values</span>
<span class="n">map</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="s1">&#39;testdate&#39;</span> <span class="o">=&gt;</span> <span class="n">date_format</span><span class="p">,</span>
    <span class="s1">&#39;idnum&#39;</span> <span class="o">=&gt;</span> <span class="sr">/\A\d{3}\Z/</span><span class="p">,</span> <span class="c1"># id number must be exactly 3 digits</span>
    <span class="s1">&#39;gender&#39;</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="s1">&#39;.&#39;</span><span class="o">]</span><span class="p">,</span> <span class="c1"># gender can be one of 3 values</span>
    <span class="s1">&#39;birthdate&#39;</span> <span class="o">=&gt;</span> <span class="n">date_format</span>
  <span class="p">},</span>
  <span class="s1">&#39;condition&#39;</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="s1">&#39;cond_ab&#39;</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="o">]</span> <span class="c1"># condition can be either &#39;a&#39; or &#39;b&#39;</span>
  <span class="p">},</span>
  <span class="s1">&#39;trial&#39;</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="s1">&#39;trialnum&#39;</span> <span class="o">=&gt;</span> <span class="sr">/\A\d+\Z/</span><span class="p">,</span> <span class="c1"># trial number must be one or more digits</span>
    <span class="s1">&#39;result_xyz&#39;</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="o">]</span> <span class="c1"># result must be one of 3 values</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">## Body</span>
<span class="n">check_valid_codes2</span><span class="p">(</span><span class="n">map</span><span class="p">,</span> <span class="s1">&#39;~/Desktop/check.txt&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>

<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../../tutorials/check-for-coding-errors.html"><span class="doc">Check for Coding Errors</span></a></p>
</div>
</div>


    

				
    <div class="cf trail">
        <div class="leftie">
            <span class="btn-arrow-left">&larr;&nbsp;</span>
            <a href="check_valid_codes.html" title="Previous Section: check_valid_codes()"><span>check_valid_codes()</span></a>
        </div>
        <div class="rightie_bottom">
            <a href="combine_columns.html" title="Next Section: combine_columns()"><span>combine_columns()</span></a>
            <span class="btn-arrow-right">&nbsp;&rarr;</span>
        </div>
    </div>


        </div>

				<nav class="col_nav page_sidebar">
					
<h2><a href="../../../index.html">Datavyu</a></h2>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../guide.html">Software Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../api.html">Ruby API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../introduction-to-apis.html">Introduction to APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../overview.html">Classes, Methods, and Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../introduction-to-scripting.html">Introduction to Scripting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials.html">API Tutorials</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../reference.html">Datavyu Ruby API Reference</a><ul class="current">
<li class="toctree-l3"><a class="reference external" href="http://databrary.github.io/datavyu-docs">Full API Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../1.3.4.html">Version 1.3.4</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../1.3.6.html">Version 1.3.6</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="class/CTable.html">CTable Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="class/RCell.html">RCell Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="class/RColumn.html">RColumn Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="add_codes_to_column.html">add_codes_to_column()</a></li>
<li class="toctree-l4"><a class="reference internal" href="check_datavyu_version.html">check_datavyu_version()</a></li>
<li class="toctree-l4"><a class="reference internal" href="check_reliability.html">check_reliability()</a></li>
<li class="toctree-l4"><a class="reference internal" href="check_valid_codes.html">check_valid_codes()</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">check_valid_codes2()</a></li>
<li class="toctree-l4"><a class="reference internal" href="combine_columns.html">combine_columns()</a></li>
<li class="toctree-l4"><a class="reference internal" href="compute_kappa.html">compute_kappa()</a></li>
<li class="toctree-l4"><a class="reference internal" href="create_mutually_exclusive.html">create_mutually_exclusive()</a></li>
<li class="toctree-l4"><a class="reference internal" href="delete_cell.html">delete_cell()</a></li>
<li class="toctree-l4"><a class="reference internal" href="delete_variable.html">delete_variable()</a></li>
<li class="toctree-l4"><a class="reference internal" href="get_cell_from_time.html">get_cell_from_time()</a></li>
<li class="toctree-l4"><a class="reference internal" href="get_column.html">get_column()</a></li>
<li class="toctree-l4"><a class="reference internal" href="get_column_list.html">get_column_list()</a></li>
<li class="toctree-l4"><a class="reference internal" href="get_datavyu_version.html">get_datavyu_version()</a></li>
<li class="toctree-l4"><a class="reference internal" href="load_db.html">load_db()</a></li>
<li class="toctree-l4"><a class="reference internal" href="load_macshapa_db.html">load_macshapa_db()</a></li>
<li class="toctree-l4"><a class="reference internal" href="make_duration_block_rel.html">make_duration_block_rel()</a></li>
<li class="toctree-l4"><a class="reference internal" href="make_reliability.html">make_reliability()</a></li>
<li class="toctree-l4"><a class="reference internal" href="merge_columns.html">merge_columns()</a></li>
<li class="toctree-l4"><a class="reference internal" href="new_column.html">new_column()</a></li>
<li class="toctree-l4"><a class="reference internal" href="print_cell_codes.html">print_cell_codes()</a></li>
<li class="toctree-l4"><a class="reference internal" href="print_codes.html">print_codes()</a></li>
<li class="toctree-l4"><a class="reference internal" href="save_db.html">save_db()</a></li>
<li class="toctree-l4"><a class="reference internal" href="set_column.html">set_column()</a></li>
<li class="toctree-l4"><a class="reference internal" href="smooth_column.html">smooth_column()</a></li>
<li class="toctree-l4"><a class="reference internal" href="transfer_columns.html">transfer_columns()</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference external" href="https://github.com/databrary/Datavyu-Example-Scripts">Example Scripts</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../walkthrough-videos.html">Walkthrough Videos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../coding-example.html">Coding Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../best-practices.html">Best Practices for Coding Behavioral Data from Video</a></li>
</ul>


<div class="getit">
    <p><a href="/docs/user-guide.pdf">Download the docs</a> for offline viewing.</p>
</div>

				</nav>
    </div>

</article>
		</div>
	</main>

<footer id="site_footer" class="site_footer">
	<div class="wrap">
		<div class="cf">
			<nav id="footer_nav" class="footer_links">
				<p>
					Copyright &copy; 2014-2020 | <a href="https://databrary.org/about/policies/terms.html">Terms of
						Use</a> | <a href="https://databrary.org/about/policies/privacy.html">Privacy Policy</a>
				</p>
				<!-- 				<figure class="footer_fig"><a href="http://databrary.org" title="Databrary: An Open Data Library for Developmental Science"><img src="/theme/img/logo/databrary-nav.png" alt="Databrary" /></a><figcaption>An Open Data Library for Developmental Science</figcaption></figure>
 -->
			</nav>
			<aside class="footer_social">
				<p>Find us on
					<a href="https://www.linkedin.com/company/databrary-project" target="_blank" class="img"><img
							id="linkedin" src="/theme/img/social/linkedin.png" alt="LinkedIn"></a>,
					<a href="https://www.facebook.com/databrary" target="_blank" class="img"><img id="facebook"
							src="/theme/img/social/facebook.png" alt="Facebook"></a>,
					<!-- <a href="https://plus.google.com/u/1/111083162045777800330/posts" target="_blank" class="img"><img id="google-plus" src="/theme/img/social/google-plus.png" alt="Google+"></a>, -->
					<a href="https://twitter.com/databrary" target="_blank" class="img"><img id="twitter"
							src="/theme/img/social/twitter.png" alt="Twitter"></a>, and
					<a href="https://github.com/databrary/" target="_blank" class="img"><img id="github"
							src="/theme/img/social/github.png" alt="GitHub"></a>.
				</p>
			</aside>
		</div>

		<div class="cf legal">
			<p>This material is based on work supported by the National Science Foundation under Grant No. BCS-1238599
				and the Eunice Kennedy Shriver National Institute of Child Health and Human Development under
				Cooperative Agreement U01-HD-076595. Any opinions, findings, and conclusions or recommendations
				expressed in this material are those of the author(s) and do not necessarily reflect the views of the
				National Science Foundation or the Eunice Kennedy Shriver National Institute of Child Health and Human
				Development.</p>

			<p>
				<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/80x15.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
			</p>

			<ul class="inline grants">
				<li>
					<a href="http://www.nsf.gov/awardsearch/showAward?AWD_ID=1238599&HistoricalAwards=false">
						<img src="/theme/img/grants/nsf.png" class="nsf"> BCS-1238599 </a>
				</li>
				<li>
					<a
						href="http://projectreporter.nih.gov/project_info_description.cfm?aid=8531595&icde=15908155&ddparam=&ddvalue=&ddsub=&cr=1&csb=default&cs=ASC">
						<img src="/theme/img/grants/nih.png" class="nih"> U01-HD-076595 </a>
				</li>
			</ul>
		</div>
	</div>
</footer></body>
</html>